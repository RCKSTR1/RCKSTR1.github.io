---
layout: post
title: 'Schematics, Componentes y Ruteo con Angular + Material.'
description: 'Demo: GLTrack. Una aplicación para monitorear niveles de glucosa para pacientes de diabetes.'
image: assets/images/blog/GLTrack1/GLTrack1.png
---

<div class="post-content">
    <iframe allow="encrypted-media" allowtransparency="true" class="image left" frameborder="0" height="300"
        src="https://open.spotify.com/embed/playlist/06CSaSuQsLbebrp3nepUgt" width="300"></iframe>

    <h2>Introducción</h2>

    <p>En este post comenzaremos a crear una aplicación para registrar y monitorear un registro personal de niveles de
        azúcar en la sangre, esas mediciones que deben tomarse regularmente los pacientes de diabetes.</p>

    <p>Para crear nuestra aplicación utilizaremos componentes, esquemas prefabricados, gráficas, servicios y ruteo de
        Angular, así como componentes de Material Design para nuestra interfaz gráfica.</p>

    <div class="row">
        <p class="12u">Nuestra aplicación constara de las siguientes características:
            <ol>
                <li>Registro de mediciones de glucosa.</li>
                <li>Dashboard de resultados con gráficas.</li>
            </ol>
        </p>
    </div>

    <h2>Paso 1: Crear una nueva aplicación e instalar Angular Material</h2>
    <p>Comenzaremos creando una aplicación nueva, instalando Angular Material y preparando una interfaz gráfica básica
        ejecutando los siguientes comandos en la terminal.
    </p>

    <div class="row">
        <div class="6u 12u$(small)">
            <pre><code>ng new gltrack-app
ng add @angular/material
            </code></pre>
        </div>
        <div class="6u 12u$(small)"><span class="image fit"><a href="/assets/images/blog/GLTrack1/01-AddMaterial.png"
                    target="_blank"><img src="/assets/images/blog/GLTrack1/01-AddMaterial.png" alt="" /></a></span>
        </div>
    </div>
    <blockquote> Si necesitas ayuda creando una aplicación de Angular, puedes ver los detalles en el post <i><a
                href="{% link _posts/2019-5-30-HolaAngular8.md %}" target="_blank">"¡Hola Angular 8!"</a></i>.
    </blockquote>
    <blockquote> Si necesitas ayuda instalando Angular Material, puedes ver los detalles en el post <i><a
                href="{% link _posts/2019-6-04-AngularMaterial.md %}" target="_blank">"Angular + Material"</a></i>.
    </blockquote>

    <h2>Paso 2: Crear menú de navegación con schematics de Angular Material</h2>
    <p>Angular Material incluye esquemas prefabricados que nos permiten construir nuestras aplicaciones de manera más
        fácil y rápida.</p>
    <p>Esta ocasión crearemos un menú de navegación utilizando el schematic 'navigation' para crear un componente que
        incluye una barra de herramientas con el nombre de la aplicación y una barra de navegación responsiva.
        En la terminal, ejecuta el siguiente comando:</p>

    <pre><code>ng generate @angular/material:nav components/nav</code></pre>

    <p>Hay que destacar que al indicar “components/[nombre del nuevo componente]” estamos creando el nuevo componente
        dentro de una carpeta “components” que va a contener los componentes de nuestra app. Esto nos permite tener
        nuestro código mejor organizado.</p>

    <p>Después de generar nuestro componente de navegación, podemos ver que se importaron los módulos de Angular
        Material necesarios de manera automática directamente en el archivo app.module.ts.</p>

    <p>Como buena práctica, crearemos un módulo separado para encargarse de importar los módulos de Angular Material con
        el siguiente comando:
    </p>

    <pre><code>ng generate module modules/material</code></pre>

    <p>Después, hay que mover las referencias a los módulos de Angular Material de app.module.ts a material.module.ts.
    </p>

    <p>Ahora, importa el módulo MaterialModule en app.module.ts.</p>

    <h2>Paso 3: Crear componentes</h2>
    <p>Para crear los componentes necesarios para nuestra aplicación, ejecuta:</p>
    <pre><code>ng generate component components/dashboard
ng generate component components/registro
</code></pre>

    <h2>Paso 4: Preparar navegación y ruteo</h2>
    <p>Después de crear los componentes principales que conforman nuestra app, necesitamos permitir que el usuario pueda
        navegar entre ellos.</p>
    <h3>Ruteo de angular</h3>
    <p>Actualiza el contenido de la constante “routes” en el archivo app-routing.module.ts como se muestra a
        continuación:</p>
    <pre><code>const routes: Routes = [
    { path: '', redirectTo: 'dashboard', pathMatch: 'full' },
    { path: '404', redirectTo: 'dashboard', pathMatch: 'full' },
    { path: 'dashboard', component: DashboardComponent },
    { path: 'ingresos', component: RegistroComponent }
];
</code></pre>

    <p>De esta manera, estamos registrando las rutas a las que el usuario puede navegar en nuestra aplicación. En la
        primera ruta, estamos estableciendo un valor predeterminado para cuando el usuario navegue a la raíz de nuestra
        app, en este caso, estaríamos redirigiendo a la ruta ‘dashboard’.</p>
    <p>En la segunda ruta estamos indicando que cuando el usuario navegue por error a alguna ruta que no exista sea
        redirigido al dashboard.</p>
    <p>En las últimas dos rutas estamos indicando las rutas disponibles y el componente que debe mostrarse en cada ruta.
    </p>
    <p>Una vez creadas las rutas, elimina el contenido auto generado en app.component.html para que quede de la
        siguiente manera:</p>
    <pre><code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></pre>
    <p>Ahora, navega a las diferentes rutas de la app para comprobar el funcionamiento del ruteo de Angular.</p>

    <h3>Implementar el componente de navegación</h3>
    <p>En pasos anteriores creamos un componente de navegación utilizando schematics de Angular Material, para comenzar
        a utilizar el componente, agrega la siguiente línea al archivo nav.component.html justo al final del bloque
        “mat-sidenav-content”:</p>

    <pre><code>&lt;ng-content&gt;&lt;/ng-content&gt;</code></pre>

    <p>El contenido de nav.component.html debe quedar como se muestra a continuación:</p>
    <pre><code>&lt;mat-sidenav-container class="sidenav-container"&gt;
    
    ...

    &lt;mat-sidenav-content&gt;
    &lt;mat-toolbar color="primary"&gt;
    
    ...
    
    &lt;/mat-toolbar&gt;
    &lt;!-- Add Content Here --&gt;
    &lt;ng-content&gt;&lt;/ng-content&gt;
    &lt;/mat-sidenav-content&gt;
&lt;/mat-sidenav-container&gt;
</code></pre>

    <p>A continuación, reemplaza los contenidos del archivo app.component.html con lo siguiente:</p>
    <pre><code>&lt;app-nav&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
&lt;/app-nav&gt;
</code></pre>

    <p>De esta manera, nuestra app muestra el componente de navegación, así como el componente que hayamos indicado en
        cada una de las rutas registradas para nuestra app en app-routing.module.ts.</p>

    <h3>Preparar menú de navegación</h3>

    <p>Para crear nuestro menú de navegación, en lugar de escribir un menú de opciones estático, comenzaremos creando un
        arreglo de opciones que, de ser necesario, podríamos modificar de manera dinámica utilizando alguna fuente
        externa.</p>

    <p>Primero, crearemos un nuevo archivo models.ts dentro de un folder nuevo en nuestra app. En el nuevo archivo
        models.ts, modelaremos una interfaz que usaremos como plantilla para nuestras opciones del menú de navegación:
    </p>

    <pre><code>export interface NavMenuItem {
    Label: string;
    Target: string;
}
</code></pre>

    <p>Ahora, en el componente de navegación nav.component.ts, crea un arreglo con la lista de opciones que mostraremos
        en nuestro menú de la siguiente manera:</p>

    <pre><code>...
        
import { NavMenuItem } from 'src/app/models/models';

...
export class NavComponent {
    menu = [
        { Label: 'Dashboard', Target: '/dashboard' },
        { Label: 'Registro', Target: '/registro' }
    ] as NavMenuItem[];

    ...
}
</code></pre>

    <p>Después de crear la lista de opciones, actualiza nav.component.html para generar las opciones del menú de
        navegación de manera dinámica. Elimina las opciones estáticas para incluir lo siguiente:</p>

    <pre><code>...
&lt;mat-toolbar&gt;Menu&lt;/mat-toolbar&gt;
&lt;mat-nav-list&gt;
    &lt;a mat-list-item *ngFor="let option of menu" [routerLink]="option.Target"&gt;{{option.Label}}&lt;/a&gt;
&lt;/mat-nav-list&gt;
...
</code></pre>

    <p>De esta manera, se estará generando una opción en el menú por cada objeto en nuestro arreglo de opciones y ahora
        podemos utilizar el menu para navegar entre las rutas de la aplicación.</p>

    <h2>Conclusión</h2>
    <p>En este post vimos los pasos necesarios para generar componentes de Angular 8 en blanco, así como utilizando
        esquemas prefabricados (schematics). También utilizamos las características básicas del ruteo de Angular.</p>

    <p>En la segunda parte de este post, continuaremos agregando funcionalidad a nuestra app implementando modelos de
        datos, formas de angular y data binding, así como servicios para leer y escribir datos.</p>

    <p>El código fuente completo de la aplicación de ejemplo puedes encontrarlo en GitHub, en <a
            href="https://github.com/RCKSTR1/GLTrack1" target="_blank">https://github.com/RCKSTR1/GLTrack1</a>
        o si prefieres, puedes clonar el repositorio
        directo en https://github.com/RCKSTR1/GLTrack1.git</p>
    <p>Si tuviste algún problema o duda al seguir los pasos, o si tienes alguna pregunta acerca de este post, contáctame
        en Twitter, Facebook o LinkedIn.</p>

    <p>
        <strong>Es cuánto.</strong>
    </p>

    <h2>Fuentes</h2>
    <ul>
        <li>Documentación de Angular Material, "Schematics". <a href="https://material.angular.io/guide/schematics"
                target="_blank">https://material.angular.io/guide/schematics</a></li>
        <li>Documentación de Angular. "Arquitectura, Introducción a los módulos"<a
                href="https://angular.io/guide/architecture-modules"
                target="_blank">https://angular.io/guide/architecture-modules</a></li>
        <li>Documentación de Angular, "Fundamentos, Ruteo y navegación" <a href="https://angular.io/guide/router"
                target="_blank">https://angular.io/guide/router</a></li>
    </ul>

</div>

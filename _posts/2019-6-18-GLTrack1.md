---
layout: post
title: 'Schematics, Componentes y Ruteo con Angular + Material.'
description: 'Demo: GLTrack. Una aplicación para monitorear niveles de glucosa para pacientes de diabetes.'
image: assets/images/blog/GLTrack1/GLTrack1.png
---

<div class="post-content">
    <iframe allow="encrypted-media" allowtransparency="true" class="image left" frameborder="0" height="300"
        src="https://open.spotify.com/embed/playlist/06CSaSuQsLbebrp3nepUgt" width="300"></iframe>

    <h2>Introducción</h2>

    <p>En este post comenzaremos a crear una aplicación para registrar y monitorear un registro personal de niveles de
        azúcar en la sangre, esas mediciones que deben tomarse regularmente los pacientes de diabetes.</p>

    <p>Para crear nuestra aplicación utilizaremos componentes, esquemas prefabricados, gráficas, servicios y ruteo de
        Angular, así como componentes de Material Design para nuestra interfaz gráfica.</p>

    <div class="row">
        <p class="12u">Nuestra aplicación constara de las siguientes características:
            <ol>
                <li>Registro de mediciones de glucosa.</li>
                <li>Dashboard de resultados con gráficas.</li>
            </ol>
        </p>
    </div>

    <h2>Paso 1: Crear una nueva aplicación e instalar Angular Material</h2>
    <p>Comenzaremos creando una aplicación nueva, instalando Angular Material y preparando una interfaz gráfica básica
        ejecutando los siguientes comandos en la terminal.
    </p>

    <div class="row">
        <div class="6u 12u$(small)">
            <pre><code>ng new gltrack-app
ng add @angular/material
            </code></pre>
        </div>
        <div class="6u 12u$(small)"><span class="image fit"><a href="/assets/images/blog/GLTrack1/01-AddMaterial.png"
                    target="_blank"><img src="/assets/images/blog/GLTrack1/01-AddMaterial.png" alt="" /></a></span>
        </div>
    </div>
    <blockquote> Si necesitas ayuda creando una aplicación de Angular, puedes ver los detalles en el post <i><a
                href="{% link _posts/2019-5-30-HolaAngular8.md %}" target="_blank">"¡Hola Angular 8!"</a></i>.
    </blockquote>
    <blockquote> Si necesitas ayuda instalando Angular Material, puedes ver los detalles en el post <i><a
                href="{% link _posts/2019-6-04-AngularMaterial.md %}" target="_blank">"Angular + Material"</a></i>.
    </blockquote>

    <h2>Paso 2: Crear menú de navegación con schematics de Angular Material</h2>
    <p>Angular Material incluye esquemas prefabricados que nos permiten construir nuestras aplicaciones de manera más
        fácil y rápida.</p>
    <p>Esta ocasión crearemos un menú de navegación utilizando el schematic 'navigation' para crear un componente que
        incluye una barra de herramientas con el nombre de la aplicación y una barra de navegación responsiva.
        En la terminal, ejecuta el siguiente comando:</p>

    <pre><code>ng generate @angular/material:nav components/nav</code></pre>

    <p>Hay que destacar que al indicar “components/[nombre del nuevo componente]” estamos creando el nuevo componente
        dentro de una carpeta “components” que va a contener los componentes de nuestra app. Esto nos permite tener
        nuestro código mejor organizado.</p>

    <p>Después de generar nuestro componente de navegación, podemos ver que se importaron los módulos de Angular
        Material necesarios de manera automática directamente en el archivo app.module.ts.</p>

    <p>Como buena práctica, crearemos un módulo separado para encargarse de importar los módulos de Angular Material con
        el siguiente comando:
    </p>

    <pre><code>ng generate module modules/material</code></pre>

    <p>Después, hay que mover las referencias a los módulos de Angular Material de app.module.ts a material.module.ts.
    </p>

    <p>Ahora, importa el módulo MaterialModule en app.module.ts.</p>

    <h2>Paso 3: Crear componentes</h2>
    <p>Para crear los componentes necesarios para nuestra aplicación, ejecuta:</p>
    <pre><code>ng generate component components/dashboard
ng generate component components/registro
</code></pre>

    <h2>Paso 4: Preparar navegación y ruteo</h2>

    //------------------------------------------------------------------------





    <h2>Paso 3: Importar los componentes de Material UI</h2>
    <p>Los componentes de Material pueden importarse directamente en app.module.ts, sin embargo, como buena práctica,
        vamos a crear un módulo separado para importar los componentes. De esta manera, podemos tener nuestros módulos
        mejor organizados.</p>

    <ol>
        <li>En la consola, ejecuta la siguiente línea:</li>
        <pre><code>ng generate module material</code></pre>
        <li>Importa el nuevo módulo en app.module.ts</li>
        <div style="text-align: center"><span class="image 4u 12u$(small)"><a
                    href="/assets/images/blog/AngularMaterial/02-CustomModule.png" target="_blank"><img
                        src="/assets/images/blog/AngularMaterial/02-CustomModule.png" alt="" /></a></span></div>
        <li>Importa y exporta los componentes de Material en el módulo material.module.ts</li>
        <p>Para este ejemplo importaremos los siguientes componentes:</p>
        <div class="row">
            <div class="10u 12u$(small)">
                <ul>
                    <li>MatButtonModule</li>
                    <li>MatMenuModule</li>
                    <li>MatToolbarModule</li>
                    <li>MatIconModule</li>
                    <li>MatCardModule</li>
                    <li>MatSidenavModule</li>
                    <li>MatListModule</li>
                </ul>
                <p>Ya importados los componentes que vamos a utilizar, podemos llamarlos desde nuestra aplicación.</p>
            </div>
            <div class="2u 12u$(small)"><span class="image fit"><a
                        href="/assets/images/blog/AngularMaterial/03-ImportComponents.png" target="_blank"><img
                            src="/assets/images/blog/AngularMaterial/03-ImportComponents.png" alt="" /></a></span></div>
        </div>



    </ol>

    <h3>Estilos, íconos y soporte de gestos (opcional)</h3>
    <h4>Temas prefabricados</h4>
    <p>Podemos incluir estilos prefabricados en nuestra aplicación, para este ejemplo, agrega lo siguiente a styles.css.
    </p>
    <pre><code>@import "~@angular/material/prebuilt-themes/deeppurple-amber.css";</code></pre>

    <h4>Soporte de gestos</h4>
    <p>Algunos componentes como slide toggle, sliders y tooltips requieren HammerJS para soportar gestos. En este
        ejemplo no los estamos importando, pero en caso de que quieras usarlos puedes instalar HammerJS desde la consola
        ejecutando:</p>
    <pre><code>npm install --save hammerjs</code></pre>
    <p>Después de instalar hammerjs, debes importarlo en el archivo main.ts.</p>
    <pre><code>import 'hammerjs';</code></pre>
    <div style="text-align: center">
        <span class="image 4u 12u$(small)"><a href="/assets/images/blog/AngularMaterial/04-hammerjs.png"
                target="_blank"><img src="/assets/images/blog/AngularMaterial/04-hammerjs.png" alt="" /></a></span>
    </div>

    <h4>Iconos</h4>
    <p>Para poder utilizar los iconos de Material UI, tenemos que cargar la fuente de Material Icons en el bloque
        <strong>head</strong> del archivo index.html.</p>
    <pre><code>&lt;link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"&gt;</code></pre>
    <div style="text-align: center">
        <span class="image 4u 12u$(small)"><a href="/assets/images/blog/AngularMaterial/05-Icons.png"
                target="_blank"><img src="/assets/images/blog/AngularMaterial/05-Icons.png" alt="" /></a></span>
    </div>

    <h2>Paso 4: Construir nuestra interfaz de usuario</h2>
    <p>En este paso crearemos un ejemplo de interfaz de usuario responsiva utilizando los componentes de Material UI
        importados en nuestra aplicación.</p>
    <p><strong>Reemplaza los contenidos de app.component.ts con el siguiente código:</strong></p>
    <pre><code>import { Component, ChangeDetectorRef, OnDestroy } from '@angular/core';
import { MediaMatcher } from '@angular/cdk/layout';

@Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.css']
})
export class AppComponent implements OnDestroy {
    title = 'Angular + Material';
    mobileQuery: MediaQueryList;
    fillerNav = ['Opción 1', 'Opción 2', 'Opción 3', 'Opción 4', 'Opción 5', 'Opción 6', 'Opción 7'];

    fillerContent = Array.from({ length: 50 }, () => 'Interfaz gráfica usando componentes de Material UI. RCKSTR1 en GitHub. rckstr1.github.io');

    private _mobileQueryListener: () => void;

    constructor(changeDetectorRef: ChangeDetectorRef, media: MediaMatcher) {
    this.mobileQuery = media.matchMedia('(max-width: 600px)');
    this._mobileQueryListener = () => changeDetectorRef.detectChanges();
    this.mobileQuery.addListener(this._mobileQueryListener);
    }

    ngOnDestroy(): void {
    this.mobileQuery.removeListener(this._mobileQueryListener);
    }
}
        </code></pre>

    <p><strong>Reemplaza los contenidos de app.component.html con el siguiente código:</strong></p>
    <pre><code>&lt;div class="app-container" [class.app-is-mobile]="mobileQuery.matches"&gt;
    &lt;mat-toolbar color="primary" class="app-toolbar"&gt;
        &lt;button mat-icon-button (click)="snav.toggle()"&gt;
        &lt;mat-icon&gt;menu&lt;/mat-icon&gt;
        &lt;/button&gt;
        &lt;h1 class="app-app-name"&gt;&#123;&#123;title}}&lt;/h1&gt;
    &lt;/mat-toolbar&gt;
    
    &lt;mat-sidenav-container class="app-sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0"&gt;
        &lt;mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'" [fixedInViewport]="mobileQuery.matches"
        fixedTopGap="56"&gt;
        &lt;mat-nav-list&gt;
            &lt;a mat-list-item routerLink="." *ngFor="let nav of fillerNav"&gt;&#123;&#123;nav}}&lt;/a&gt;
        &lt;/mat-nav-list&gt;
        &lt;/mat-sidenav&gt;
    
        &lt;mat-sidenav-content&gt;
        &lt;router-outlet&gt;&lt;/router-outlet&gt;
        &lt;p *ngFor="let content of fillerContent"&gt;&#123;&#123;content}}&lt;/p&gt;
        &lt;/mat-sidenav-content&gt;
    &lt;/mat-sidenav-container&gt;
&lt;/div&gt;
      </code></pre>

    <p><strong>Reemplaza los contenidos de app.component.css con el siguiente código:</strong></p>
    <pre><code>.app-container {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}

.app-is-mobile .app-toolbar {
    position: fixed;
    z-index: 2;
}

h1.app-app-name {
    margin-left: 8px;
}

.app-sidenav-container {
    flex: 1;
}

.app-is-mobile .app-sidenav-container {
    flex: 1 0 auto;
}
</code></pre>

    <h2>Paso 5: Ejecutar nuestra aplicación</h2>
    <p>En la consola integrada de Visual Studio Code, ejecuta la aplicación.</p>
    <pre><code>ng serve --open</code></pre>
    <p>Listo. Tenemos nuestra primera aplicación con Angular 8 y Material UI.</p>
    <div style="text-align: center">
        <span class="image 4u 12u$(small)"><a href="/assets/images/blog/AngularMaterial/06-ItWorks.png"
                target="_blank"><img src="/assets/images/blog/AngularMaterial/06-ItWorks.png" alt="" /></a></span>
    </div>

    <h2>Conclusión</h2>
    <p>En este post vimos los pasos necesarios para utilizar componentes de Material Design en nuestras aplicaciones con
        Angular.</p>
    <p>Ahora estas listo para experimentar con Angular 8 y los componentes de Material UI.</p>
    <p>El código fuente completo de la aplicación de ejemplo puedes encontrarlo en GitHub, en <a
            href="https://github.com/RCKSTR1/AngularMaterial"
            target="_blank">https://github.com/RCKSTR1/AngularMaterial</a> o si prefieres, puedes clonar el repositorio
        directo en https://github.com/RCKSTR1/AngularMaterial.git</p>
    <p>Si tuviste algún problema o duda al seguir los pasos, o si tienes alguna pregunta acerca de este post, contáctame
        en Twitter, Facebook o LinkedIn.</p>

    <p>
        <strong>Es cuánto.</strong>
    </p>

    <h2>Fuentes</h2>
    <ul>
        <li>Documentación de Angular Material. <a href="https://material.angular.io/guide/getting-started"
                target="_blank">https://material.angular.io/guide/getting-started</a></li>
    </ul>

</div>
